{% extends "base.html" %}

{% block content %}
<section class="max-w-6xl mx-auto px-6 py-12 space-y-8">
    <div class="glass p-8 rounded-3xl shadow space-y-4">
        <h1 class="text-3xl font-bold text-slate-800">Energy tracker</h1>
        <p class="text-slate-500">Capture daily generation, consumption or export entries in one place.</p>
        <div class="grid md:grid-cols-3 gap-4">
            <div class="bg-white border border-slate-200 rounded-2xl p-5">
                <p class="text-xs uppercase tracking-wide text-slate-500">Total generation</p>
                <p class="text-2xl font-semibold text-slate-900">{{ "{:,.2f}".format(total_generation or 0) }} kWh</p>
            </div>
            <div class="bg-white border border-slate-200 rounded-2xl p-5">
                <p class="text-xs uppercase tracking-wide text-slate-500">Total export</p>
                <p class="text-2xl font-semibold text-slate-900">{{ "{:,.2f}".format(total_export or 0) }} kWh</p>
            </div>
            <div class="bg-white border border-slate-200 rounded-2xl p-5">
                <p class="text-xs uppercase tracking-wide text-slate-500">Revenue recorded</p>
                <p class="text-2xl font-semibold text-emerald-600">₹{{ "{:,.2f}".format(total_revenue or 0) }}</p>
            </div>
        </div>
        <a href="{{ url_for('tracker.add_entry') }}" class="inline-flex items-center justify-center bg-cyan-500 hover:bg-cyan-600 text-white font-semibold px-5 py-3 rounded-lg shadow">
            Add new entry
        </a>
    </div>

    <div class="space-y-4">
        <h2 class="text-xl font-semibold text-slate-800">Recent entries</h2>
        {% if logs %}
            <div class="grid gap-4">
                {% for log in logs %}
                    <article class="bg-white border border-slate-200 rounded-2xl p-6 space-y-2">
                        <div class="flex items-center justify-between">
                            <span class="px-3 py-1 text-xs font-semibold rounded-full bg-sky-100 text-sky-700">{{ log.entry_type|capitalize }}</span>
                            <span class="text-sm text-slate-500">{{ log.date.strftime('%d %b %Y') }}</span>
                        </div>
                        <p class="text-lg font-semibold text-slate-800">{{ "{:,.2f}".format(log.kwh) }} kWh</p>
                        {% if log.revenue %}
                            <p class="text-sm text-emerald-600">₹{{ "{:,.2f}".format(log.revenue) }} recorded</p>
                        {% endif %}
                        {% if log.panel_id %}
                            <p class="text-sm text-slate-500">Panel ID: {{ log.panel_id }}</p>
                        {% endif %}
                        {% if log.note %}
                            <p class="text-sm text-slate-500">{{ log.note }}</p>
                        {% endif %}
                    </article>
                {% endfor %}
            </div>
        {% else %}
            <p class="text-sm text-slate-500">No entries logged yet. Add your first record to start tracking performance.</p>
        {% endif %}
    </div>
</section>
{% endblock %}
